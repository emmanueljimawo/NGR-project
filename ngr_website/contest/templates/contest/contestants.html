{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block title %}Home{% endblock %}

{% block content %}
<section class="team-grid body-container">
    <div class="container">
        <div class="text-center intro">
            <h1 class="display-4 text-center mb-5" style="font-family: Allura, serif;">Contestants</h1>
        </div>
        <div class="row d-flex justify-content-center">
            <div class="col-md-8 text-center search-area">
                <div></div><i class="fas fa-search search-icon"></i><input type="search" id="searchField" class="custom-search-input mb-5" placeholder="Search contestants">
            </div>
        </div>
        {% if object_list  %}
        <div class="django-output">
        <div class="row people">
            {% for object in object_list %}
            {% if object.payment_verified %}
            <div class="col-md-4 col-lg-3 item" data-aos="fade-up">
                <div class="box" style="background-image: url({{object.photograph.url}});">
                    <div class="cover">
                        <h3 class="name">{{object.last_name}} {{object.other_names}}</h3>
                        <p class="title">{{object.profession}}</p>
                        <div class="social">
                           {% if object.facebook %} <a href="{{object.facebook}}"><i class="fa fa-facebook-official"></i></a>{% endif %}
                           {% if object.instagram %} <a href="{{object.instagram}}"><i class="fa fa-instagram"></i></a>{% endif %}
                        </div>
                        <div class="d-flex justify-content-around mt-4"><a class="btn btn-warning" role="button" href="{% url 'contest:profile' object.slug %}">Profile</a>
                            <span class="btn btn-success paystack-btn"
                            data-currency="{{currency}}" 
                            data-ref="{{ref_number}}"
                            data-key="{{paystack_public_key}}" 
                            data-email="{{object.email}}" 
                            data-amount="{{contest.voting_fee_amount}}"
                            data-label="{{object.slug}}"
                            data-url="{% url 'contest:verify_voting_fee_payment' object.slug ref_number %}"
                            >
                            Vote<i class="fa fa-star ms-1"></i></span>
        
                        </div>
                    </div>
                </div>
                <div class="ribbon"><span>{% if object.count_votes %}{{object.count_votes|intcomma}}{% else %}0{% endif %} votes</span></div>
            </div>
            {% else %}
            <h3 class="text-muted display-6">Contestants unavailable...</h3>
            {% endif %}
            {% endfor %}
        </div>
    </div>
        <div class="search-output">
            <div class="row people">
            </div>
        </div>
        <div class="django-output">
            {% if page_obj.paginator.num_pages > 1 %}
            {% include 'includes/pagination.html' with page_obj=page_obj %}
            {% endif %}
            </div>
    
        {% else %}
            <h3 class="text-muted display-6">Contestants unavailable...</h3>

    {% endif %}
</section>
{% endblock %}


